function resizeAvatarImage(e,t){e.width>=e.height?(e.width=t*e.width/e.height,e.height=t,offset=.5*(e.width-t),e.style.left=-offset+"px"):(e.height=t*e.height/e.width,e.width=t,offset=.5*(e.height-t),e.style.top=-offset+"px")}function changeAddBtn(e){var t=$("addFriend"),n=$("sendAgain"),i=$("addBlock");(t||n)&&(t.style.display="none",n.style.display="block",(i.innerHTML="移出黑名单")&&(i.innerHTML="加入黑名单",i.href="javascript:;",XN.event.addEvent(i,"click",function(){XN.DO.confirm({title:"加入黑名单",message:"确定将"+self.profileOwnerName+"加入黑名单吗？",callback:function(e){e&&new XN.net.xmlhttp({url:"http://friend."+XN.env.domain+"/j_f_add_block",data:"id="+self.profileOwnerId,onSuccess:function(e){},onError:function(){XN.DO.showError("服务器异常,请稍后再试!")}})}})})))}var SWFUpload;void 0==SWFUpload&&(SWFUpload=function(e){this.initSWFUpload(e)}),SWFUpload.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(t){throw delete SWFUpload.instances[this.movieName],t}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(e){if("string"!=typeof e||e.match(/^https?:\/\//i)||e.match(/^\//))return e;var t=(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),window.location.pathname.lastIndexOf("/"));return 0>=t?path="/":path=window.location.pathname.substr(0,t)+"/",path+e},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=void 0==this.settings[e]?t:this.settings[e]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var e,t;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(e=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==e)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;t=document.createElement("div"),t.innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(t),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(e),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n.toString())+"="+encodeURIComponent(e[n].toString()));return t.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var e=null;if(e=this.getMovieElement(),e&&"unknown"==typeof e.CallFunction){for(var t in e)try{"function"==typeof e[t]&&(e[t]=null)}catch(n){}try{e.parentNode.removeChild(e)}catch(i){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(o){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n","	","file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n","	","file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n","	","file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n","	","upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n","	","upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n","	","upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n","	","upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n","	","upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n","	","debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(e,t,n){return void 0==t?this.settings[e]=n:this.settings[e]=t},SWFUpload.prototype.getSetting=function(e){return void 0!=this.settings[e]?this.settings[e]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{void 0!=movieElement?(returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)):this.debug("Can't call flash because the movie wasn't found.")}catch(ex){this.debug("Exception calling flash function '"+functionName+"': "+ex.message)}return void 0!=returnValue&&"object"==typeof returnValue.post&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(e){this.callFlash("StartUpload",[e])},SWFUpload.prototype.cancelUpload=function(e,t){t!==!1&&(t=!0),this.callFlash("CancelUpload",[e,t])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(e){this.callFlash("SetStats",[e])},SWFUpload.prototype.getFile=function(e){return"number"==typeof e?this.callFlash("GetFileByIndex",[e]):this.callFlash("GetFile",[e])},SWFUpload.prototype.addFileParam=function(e,t,n){return this.callFlash("AddFileParam",[e,t,n])},SWFUpload.prototype.removeFileParam=function(e,t){this.callFlash("RemoveFileParam",[e,t])},SWFUpload.prototype.setUploadURL=function(e){this.settings.upload_url=e.toString(),this.callFlash("SetUploadURL",[e])},SWFUpload.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash("SetPostParams",[e])},SWFUpload.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash("SetFileTypes",[e,t])},SWFUpload.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash("SetFileSizeLimit",[e])},SWFUpload.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash("SetFileUploadLimit",[e])},SWFUpload.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash("SetFileQueueLimit",[e])},SWFUpload.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash("SetFilePostName",[e])},SWFUpload.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash("SetUseQueryString",[e])},SWFUpload.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash("SetRequeueOnError",[e])},SWFUpload.prototype.setHTTPSuccess=function(e){"string"==typeof e&&(e=e.replace(" ","").split(",")),this.settings.http_success=e,this.callFlash("SetHTTPSuccess",[e])},SWFUpload.prototype.setAssumeSuccessTimeout=function(e){this.settings.assume_success_timeout=e,this.callFlash("SetAssumeSuccessTimeout",[e])},SWFUpload.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash("SetDebugEnabled",[e])},SWFUpload.prototype.setButtonImageURL=function(e){void 0==e&&(e=""),this.settings.button_image_url=e,this.callFlash("SetButtonImageURL",[e])},SWFUpload.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var n=this.getMovieElement();void 0!=n&&(n.style.width=e+"px",n.style.height=t+"px"),this.callFlash("SetButtonDimensions",[e,t])},SWFUpload.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash("SetButtonText",[e])},SWFUpload.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash("SetButtonTextPadding",[e,t])},SWFUpload.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash("SetButtonTextStyle",[e])},SWFUpload.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash("SetButtonDisabled",[e])},SWFUpload.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash("SetButtonAction",[e])},SWFUpload.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash("SetButtonCursor",[e])},SWFUpload.prototype.queueEvent=function(e,t){void 0==t?t=[]:t instanceof Array||(t=[t]);var n=this;if("function"==typeof this.settings[e])this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){n.executeNextEvent()},0);else if(null!==this.settings[e])throw"Event handler "+e+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;"function"==typeof e&&e.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(e){var t,n=/[$]([0-9a-f]{4})/i,i={};if(void 0!=e){for(var o in e.post)if(e.post.hasOwnProperty(o)){t=o;for(var a;null!==(a=n.exec(t));)t=t.replace(a[0],String.fromCharCode(parseInt("0x"+a[1],16)));i[t]=e.post[o]}e.post=i}return e},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(e){return!1}},SWFUpload.prototype.flashReady=function(){var e=this.getMovieElement();return e?(this.cleanUp(e),void this.queueEvent("swfupload_loaded_handler")):void this.debug("Flash called back ready but the flash movie can't be found.")},SWFUpload.prototype.cleanUp=function(e){try{if(this.movieElement&&"unknown"==typeof e.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var t in e)try{"function"==typeof e[t]&&(e[t]=null)}catch(n){}}}catch(i){}window.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(n){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("file_queued_handler",e)},SWFUpload.prototype.fileQueueError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("file_queue_error_handler",[e,t,n])},SWFUpload.prototype.fileDialogComplete=function(e,t,n){this.queueEvent("file_dialog_complete_handler",[e,t,n])},SWFUpload.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("return_upload_start_handler",e)},SWFUpload.prototype.returnUploadStart=function(e){var t;if("function"==typeof this.settings.upload_start_handler)e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===t&&(t=!0),t=!!t,this.callFlash("ReturnUploadStart",[t])},SWFUpload.prototype.uploadProgress=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_progress_handler",[e,t,n])},SWFUpload.prototype.uploadError=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_error_handler",[e,t,n])},SWFUpload.prototype.uploadSuccess=function(e,t,n){e=this.unescapeFilePostParams(e),this.queueEvent("upload_success_handler",[e,t,n])},SWFUpload.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("upload_complete_handler",e)},SWFUpload.prototype.debug=function(e){this.queueEvent("debug_handler",e)},SWFUpload.prototype.debugMessage=function(e){if(this.settings.debug){var t,n=[];if("object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.message){for(var i in e)e.hasOwnProperty(i)&&n.push(i+": "+e[i]);t=n.join("\n")||"",n=t.split("\n"),t="EXCEPTION: "+n.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(t)}else SWFUpload.Console.writeLine(e)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(e){var t,n;try{t=document.getElementById("SWFUpload_Console"),t||(n=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(n),t=document.createElement("textarea"),t.id="SWFUpload_Console",t.style.fontFamily="monospace",t.setAttribute("wrap","off"),t.wrap="off",t.style.overflow="auto",t.style.width="700px",t.style.height="350px",t.style.margin="5px",n.appendChild(t)),t.value+=e+"\n",t.scrollTop=t.scrollHeight-t.clientHeight}catch(i){alert("Exception: "+i.name+" Message: "+i.message)}},object.define("xn/profile/comboBox","dom, events, xn/profile/ufa, xn/profile/ufl",function(require,e){var t=(require("dom"),require("events"),require("xn/profile/ufa")),n=require("xn/profile/ufl");e.ComboBox=function(e){this.coverObj=e,this.uploadFromAlbumObject=new t.upFromAlbum(this.coverObj),this.uploadFromLocalObject=new n.upFromLocal(this.coverObj,{flash_url:"http://s.xnimg.cn/apps/profile2/module/cover/swfupload/swfupload.swf",button_width:"89",button_height:"25",button_placeholder_id:"flashupload"}),this.baseDropdown=[{title:"从相册选择",cname:"from_album"},{title:"上传图片",cname:"from_upload"}],this.extraDropdown=[{title:"移动封面",cname:"reposition"}],this.superAdmin=[{title:"删除封面",cname:"delete"}],this.dropdownCallback=[this.uploadFromAlbumObject.ejectAlbumLayer,new Function,this.coverObj.repositionCover,this.coverObj.destroyCoverImage],this.fileDialogOpen=!1,this.bindDocumentClickEvent()},e.ComboBox.prototype={createBox:function(){return isYourself()?(this.combobox=document.createElement("div"),title=document.createElement("h1"),_self=this,this.combobox.className="comboBox",this.combobox.appendChild(title),DS.hasProp("photoid")?(title.innerHTML="改变封面",this.coverObj.coverCon.appendChild(this.combobox)):(title.innerHTML="添加封面",this.coverObj.coverOuterCon.appendChild(this.combobox)),void XN.event.addEvent(title,"click",function(){_self.dropdown?_self.toggleDropdown():_self.createDropdown()})):void(1==superAdmin&&(this.combobox=document.createElement("div"),title=document.createElement("h1"),_self=this,this.combobox.className="comboBox",this.combobox.appendChild(title),DS.hasProp("photoid")&&(title.innerHTML="删除封面",this.coverObj.coverCon.appendChild(this.combobox)),XN.event.addEvent(title,"click",function(){_self.coverObj.destroyCoverImage.call(_self.coverObj)})))},destroyBox:function(){this.combobox&&(this.combobox.parentNode.removeChild(this.combobox),this.combobox=this.dropdown=null)},createDropdown:function(){if(DS.hasProp("photoid"))var e=this.baseDropdown.concat(this.extraDropdown);else var e=this.baseDropdown;var t=document.createElement("ul"),n=document.createElement("span"),i=this;e.forEach(function(e,n){var o=document.createElement("li");1==n?o.innerHTML='<a href="#nogo">'+e.title+'<span id="flashupload"></span></a>':o.innerHTML='<a href="#nogo">'+e.title+"</a>",o.className=e.cname,t.appendChild(o),XN.event.addEvent(o,"click",function(){i.dropdownCallback[n].call(0==n?i.uploadFromAlbumObject:i.coverObj)})}),n.className="tl-arrow",this.combobox.appendChild(n),this.combobox.appendChild(t),this.uploadFromLocalObject.initFlashUpload(),this.span=n,this.dropdown=t,nx.browser.msie&&nx.browser.versionNumber>8&&XN.event.addEvent(t,"mouseover",function(){Sizzle(".swfupload")[0].getAttribute||(Sizzle(".swfupload")[0].getAttribute=function(){})})},toggleDropdown:function(){"none"==this.dropdown.style.display||"hidden"==this.dropdown.style.visibility||"none"==this.span.style.display||"hidden"==this.span.style.visibility?(this.dropdown.style.display="block",this.dropdown.style.visibility="visible",this.span.style.display="block",this.span.style.visibility="visible"):(this.dropdown.style.display="none",this.span.style.display="none")},bindCbEvent:function(){var e=this;XN.event.addEvent(this.coverObj.coverCon,"mouseover",function(t){e.coverObj.editMode||(e.combobox.style.display="block")}),XN.event.addEvent(this.coverObj.coverCon,"mouseleave",function(t){e.coverObj.swfuploading||e.coverObj.editMode||e.fileDialogOpen||(e.combobox.style.display="none")})},hideBox:function(){this.combobox.style.display="none"},hideDropDown:function(){this.dropdown&&(this.dropdown.style.visibility="hidden"),this.span&&(this.span.style.visibility="hidden")},bindDocumentClickEvent:function(){var e=this;XN.event.addEvent(document,"click",function(t){var n=XN.event.element(t);XN.element.hasClassName(n,"comboBox")||getParentFromClass(n,"comboBox")||!e.dropdown||(e.dropdown.style.visibility="hidden",e.span.style.visibility="hidden")})}}}),object.define("xn/profile/Timeline","dom, events, ua",function(require,e){function t(){""==tlNavData&&(d>1?tlNavData='[{"year":'+l+',"month":['+d+","+(d-1)+"]}]":tlNavData='[{"year":'+l+',"month":['+d+']},{"year":'+(l-1)+',"month":[12]}]'),tlNavData=JSON.parse(tlNavData),1==tlNavData.length&&1==tlNavData[0].month.length&&(tlNavData[0].year==l?tlNavData[0].month[0]==d?1!=d?tlNavData='[{"year":'+l+',"month":['+d+","+(d-1)+"]}]":tlNavData='[{"year":'+l+',"month":['+d+']},{"year":'+(l-1)+',"month":[12]}]':tlNavData='[{"year":'+l+',"month":['+d+","+tlNavData[0].month[0]+"]}]":tlNavData='[{"year":'+l+',"month":['+d+']},{"year":'+tlNavData[0].year+',"month":['+tlNavData[0].month[0]+"]}]",tlNavData=JSON.parse(tlNavData));for(var e=0,t=tlNavData.length;t>e;e++)h.push(tlNavData[e].year),u.push(tlNavData[e].month)}function n(){c=s.getAfterNowMarker(h,u),p=s.filterTimeData(c),m=p.years,f=p.months,g=s.getFeedDecades(m),v=Object.keys(g).length}var i=require("dom"),o=(require("events"),require("ua")),a={fasterGetImageDim:function(e,t,n,i){function o(){if(d>v.length-1){d=0;var p=r-s.length-1,m=a[p].parentNode;if(l.push(m),m.style.display="none",l.length%4==0||p==r-1){var f=p==r-1;c=n.arrangeSequenceFeed(h++,l,c,i[4],i[1],f)}s.length>0?(v=s.shift(),setTimeout(function(){o()},10)):u||(u=!0,document.body.removeChild(e),t.apply(n,i))}else getImageDimensionFromHead(v[d++],arguments.callee)}for(var a=Sizzle("article",e),r=a.length,s=[],l=[],d=0,h=0,u=!1,c={leftHeight:0,rightHeight:0,tempLeftHeight:0,tempRightHeight:0},p=0;r>p;p++){var m=a[p].parentNode,f=m.parentNode;if(m&&m.getAttribute("data-highlight")||f&&f.getAttribute("data-highlight"))var g=[];else var g=Sizzle(".a-photo img",a[p]);s.push(g)}var v=s.shift();o()},collectSmallImageIdInfo:function(e,t){t()},replaceSmallImage:function(e,t){if(o.ua.ie)i.id(e).src=t;else{var n=i.id(e),a=n.parentNode,r=new Image;r.src=t,r.onerror=n.onerror,r.onload=n.onload,a.removeChild(n),a.appendChild(r)}},isPhotoAjaxing:!1,isAlbumAjaxing:!1,getFeedLike:function(e){var t=[],n={};e.forEach(function(e,i){var o=Sizzle(".ilike-button",e);if(o.length>0){var a=XN.JSON.parse(o[0].getAttribute("data-ilike"));if("shortvideo"==a.type){var r=a.type+"_"+a.id;t.push(r),n[r]=o[0]}}}),r.getLikeData(t,function(e){e.forEach(function(e,t){e.likeCount>0&&(1==e.ownerLike?(i.wrap(n[e.gid]).addClass("ilike-button-liked"),i.wrap(n[e.gid]).addClass("liked"),n[e.gid].innerHTML="取消赞("+e.likeCount+")"):0==e.ownerLike&&(n[e.gid].innerHTML="赞("+e.likeCount+")"))})})}},r={getFeed:function(e,t,n,i,o,r,s){new XN.net.xmlhttp({url:"http://www."+XN.env.domain+"/timelinefeedretrieve.do",method:"get",useCache:!0,data:"ownerid="+profileOwnerId+"&render=0&begin="+(s?s:0)+"&limit=30&year="+t+"&month="+n+"&isAdmin="+superAdmin,onSuccess:function(l){if(window.profileActionLog.writeLog({sourceTag:"default",actionTag:"load",targetTag:"timeline_feed_retrieve",needRecordRelation:!0}),""==l.responseText){var d=[],h=0;e.apply(r,[d,i,t,n,s,c,o])}else{var u=document.createElement("div");u.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;visibility:hidden;",XN.browser.IE?u.appendChild(parseHTML5Tags(l.responseText)):u.innerHTML=l.responseText,document.body.appendChild(u);var h=Sizzle('input[type="hidden"]',u)[0];if(h)var c=h.value;var d=Sizzle("section",u);try{a.getFeedLike(d)}catch(p){console.log(p)}a.collectSmallImageIdInfo(d,function(){a.fasterGetImageDim(u,e,r,[d,i,t,n,s,c,o])})}},onError:function(){new XN.DO.showMsg("通信错误")}})},retrieveSingleFeed:function(e,t,n,i){new XN.net.xmlhttp({url:"http://www."+XN.env.domain+"/timelinesinglefeedretriever.do",method:"post",data:"stype="+t+"&ownerid="+profileOwnerId+"&source="+e,onSuccess:function(e){var t=e.responseText;""==t.trim()?new XN.DO.showMsg("新鲜事加载失败或已被删除！"):n.call(i,t)},onError:function(){new XN.DO.showMsg("通信错误")}})},operateHighlight:function(e,t,n){new XN.net.xmlhttp({url:"http://www."+XN.env.domain+"/timelinefeedhighlight.do",method:"post",data:"ownerid="+profileOwnerId+e,onSuccess:function(e){"1"==e.responseText?t.call(n):new XN.DO.showMsg("操作失败")},onError:function(){new XN.DO.showMsg("通信错误")}})},deleteFeed:function(e,t,n){new XN.net.xmlhttp({url:"http://www."+XN.env.domain+"/timelinefeedhide.do",method:"post",data:"ownerid="+profileOwnerId+e,onSuccess:function(e){"1"==e.responseText?t.call(n):new XN.DO.showMsg("操作失败")},onError:function(){new XN.DO.showMsg("通信错误")}})},deleteLeFeed:function(e){new XN.net.xmlhttp({url:"http://www."+XN.env.domain+"/lifeevent/delete",method:"post",data:e,onSuccess:function(e){},onError:function(){new XN.DO.showMsg("通信错误")}})},fetchLargeImage:function(e,t,n){var i;1==t?(i="album-",a.isAlbumAjaxing=!0):2==t&&(i="photo-",a.isPhotoAjaxing=!0),new XN.net.xmlhttp({url:"http://photo."+XN.env.domain+"/photo/facade/common/largeurls",method:"get",data:"data="+e+"&type="+t,onSuccess:function(e){var o=XN.json.parse(e.responseText).data;for(id in o)a.replaceSmallImage(i+id,o[id]);1==t&&(a.isAlbumAjaxing=!1),2==t&&(a.isPhotoAjaxing=!1),a.isAlbumAjaxing||a.isPhotoAjaxing||n()},onError:function(){new XN.DO.showMsg("通信错误")}})},getLikeData:function(e,t,n){new XN.net.xmlhttp({url:"http://like."+XN.env.domain+"/showfeedlike",method:"get",data:"uid="+XN.user.id+"&gidlist="+e.join("-"),onSuccess:function(e){var i=XN.JSON.parse(e.responseText);0==i.code&&t.call(n,i.likeList)}})}},s={getAfterNowMarker:function(e,t){var n;return n=e[0]==l&&t[0][0]==d?t[0][1]?{year:e[0],yearIndex:0,month:t[0][1],monthIndex:1}:{year:e[1],yearIndex:1,month:t[1][0],monthIndex:0}:{year:e[0],yearIndex:0,month:t[0][0],monthIndex:0}},filterTimeData:function(e){var t=cloneObj(h),n=cloneObj(u);if(t[0]==l&&n[0][0]==d){n[0].shift();var i=!0}return n[e.yearIndex].splice(i&&e.monthIndex>0?e.monthIndex-1:e.monthIndex,1),e.yearIndex>0&&(t=t.slice(1),n=n.slice(1)),u[e.yearIndex][e.monthIndex+1]||(t=t.slice(1),n=n.slice(1)),{years:t,months:n}},getFeedDecades:function(e){for(var t,n={},i=0,o=e.length;o>i;i++){var a=this.toStr(e[i]).substr(0,3);a!=t&&(t=a,n[t+"0s"]=[]),n[t+"0s"].push(e[i])}return n},getCurrentYear:function(e,t){return t?t[e]:h[e]},getCurrentMonth:function(e,t,n){return n?n[e][t]:u[e][t]},getIndexThroughYear:function(e,t){for(var n=-1,i=0,o=t.length;o>i;i++)if(t[i]==e){n=i;break}return n},getIndexThroughMonth:function(e,t,n){for(var i=-1,o=n[e],a=0,r=o.length;r>a;a++)if(t==o[a]){i=a;break}return i},getNextTimeMarker:function(e,t){0==e&&this.adjustMonthIndexCondition1&&this.adjustMonthIndexCondition2&&(t-=2,this.adjustMonthIndexCondition1=this.adjustMonthIndexCondition2=!1);var n=this.getDataSet("year"),i=this.getDataSet("month");return i[e][t+1]?{year:this.getCurrentYear(e,n),yearIndex:e,month:this.getCurrentMonth(e,t+1,i),monthIndex:t+1}:n[e+1]?{year:this.getCurrentYear(e+1,n),yearIndex:e+1,month:this.getCurrentMonth(e+1,0,i),monthIndex:0}:null},getDataSet:function(e){if("filter"==this.filterSet){if("year"==e)return m;if("month"==e)return f}else{if("year"==e)return h;if("month"==e)return u}},isAfterNowYear:function(e,t){if(e==c.year){if(this.filterSet="filter",this.adjustMonthIndexCondition1=!0,"year"==t)return m;if("month"==t)return f}else{
if(this.filterSet="all","year"==t)return h;if("month"==t)return u}},getNavigatedTime:function(e){if(e=e.toString(),-1!=e.indexOf("s"))var t=g[e][0],n=this.getIndexThroughYear(t,this.isAfterNowYear(t,"year")),i=this.isAfterNowYear(t,"month")[n][0],o=0;else if(-1!=e.indexOf("-")){var t=this.toNum(e.split("-")[0]),n=this.getIndexThroughYear(t,h),i=this.toNum(e.split("-")[1]);if(-1==n)return!1;var o=this.getIndexThroughMonth(n,i,u),a=this.loadedMarkerQueue.indexOf(parseInt(t+this.formatMonthData(i)));t==c.year&&-1==a&&(this.adjustMonthIndexCondition2=!0)}else var t=this.toNum(e),n=this.getIndexThroughYear(t,this.isAfterNowYear(t,"year")),i=this.isAfterNowYear(t,"month")[n][0],o=0;return{year:t,yearIndex:n,month:i,monthIndex:o}},loadedMarkerInQueue:function(e,t){return e=this.toNum(e),-1==t.indexOf(e)&&(t.push(e),t.sort(function(e,t){return t-e})),t},loadedMarkerDetailInQueue:function(e,t,n){return time=this.toNum(e+this.formatMonthData(t)),-1==n.indexOf(time)&&(n.push(time),n.sort(function(e,t){return t-e})),this.loadedMarkerQueue=n,n},getInsertedPosition:function(e,t,n,i){for(var o,a=this.toNum(e+this.formatMonthData(t)),r=0,s=n.length;s>r;r++)if(a>n[r]){n[r]=this.toStr(n[r]);var l=n[r].substr(0,4),d=n[r].substr(4,n[r].length-1);"0"==d.substr(0,1)&&(d=d.substr(1,1)),o=this.getDomMarker(l+"-"+d,i),o=this.ignoreCombineMarker(o),n[r]=this.toNum(n[r]);break}return o},getDomMarker:function(e,t){return Sizzle('[data-time="'+e+'"]',t)[0]},getLastDomMarkerInYear:function(e,t){var n=Sizzle('[data-time^="'+e+'"]',t),i=n.length;return n[i-1]},ignoreCombineMarker:function(e){return getPrevSibling(e)&&"timeline_marker_combine"==getPrevSibling(e).className&&(e=getPrevSibling(e)),e},getGapYearSection:function(e,t){for(var n=[],i=[],o=0,a=e.length;a>o;o++)n.push(this.getIndexThroughYear(e[o],h));for(o=0,a=n.length;a>o;o++)if(o!=a-1){for(var r=[],s=n[o]+1;s<n[o+1];s++)r.push(h[s]);r.length>0&&i.push(r)}if(t){for(var r=[],o=++n[n.length-1];o<h.length;o++)r.push(h[o]);r.length>0&&i.push(r)}return i},getGapMonthSection:function(e,t,n,i){var o=this.toNum(e+this.formatMonthData(t)),a=!1;o!=n[n.length-1]||i||(a=!0);for(var r=[],e=this.toStr(e),l=0,d=n.length;d>l;l++){if(n[l]=this.toStr(n[l]),-1!=n[l].indexOf(e)){var c=n[l].substr(4,n[l].length);"0"==c.substr(0,1)&&(c=c.substr(1)),r.push(this.toNum(c))}n[l]=this.toNum(n[l])}var p=[],m=[],f=s.getIndexThroughYear(e,h);for(l=0,d=r.length;d>l;l++)p.push(this.getIndexThroughMonth(f,r[l],u));for(l=0;l<p.length;l++){if(l!=p.length-1)for(var g=[],v=p[l]+1;v<p[l+1];v++)g.push(u[f][v]);else{var g=[];if(!a)for(var v=p[l]+1;v<u[f].length;v++)g.push(u[f][v])}g.length>0&&m.push(g)}return m},addYear:function(e){e=parseInt(e);for(var t,n=0,i=h.length;i>n;n++){if(e>h[n]){h.splice(n,0,e),t=n-1;break}n==i-1&&(h.push(e),t=i)}return t},addMonth:function(e,t,n){if(t=parseInt(t),n)for(var i=u[e],o=0,a=i.length;a>o;o++){if(t>i[o]){i.splice(o,0,t);break}o==a-1&&i.push(t)}else u.splice(e+1,0,[t])},formatMonthData:function(e){return e=this.toStr(e),e.length<=1&&(e="0"+e),e},getLastDayFromMonth:function(e,t){switch(parseInt(t)){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return this.isLeapYear(e)?29:28}},isLeapYear:function(e){return e=parseInt(e),e%400==0?!0:e%4==0&&e%100!=0?!0:!1},toStr:function(e){return e.toString()},toNum:function(e){return parseInt(e)},timeToYMD:function(e){var t=e.split("-")[0],n=parseInt(parseFloat(e.split("-")[1])).toString(),i=parseInt(parseFloat(e.split("-")[2])).toString();return{year:t,month:n,day:i}},adjustMonthIndexCondition1:!1,adjustMonthIndexCondition2:!1},l=(new Date).getFullYear(),d=(new Date).getMonth()+1,h=[],u=[];t();var c,p,m,f,g,v;n(),e.TL=function(){this.tlGapHeight=100,this.scrollBottomGapHeight=400,this.standardHeight=26,this.viewportHeight=Dimension.getViewportHeight(),this.tlViewportHeight=this.viewportHeight-this.tlGapHeight,this.tlNavMinimumHeight=v*this.standardHeight,this.timelineWrapper=i.id("timeline_wrapper"),this.timelineCon=$("timeline"),this.timelineNavCon=$("timeline_nav"),this.topAttachBar=$("top-attach"),this.tlcName="tll_feed",this.trcName="tlr_feed",this.ttcName="tlf_feed",this.commonName="timeline_feed",this.lastYearIndex=0,this.lastMonthIndex=0,this.lastYear=s.getCurrentYear(this.lastYearIndex),this.lastMonth=s.getCurrentMonth(this.lastYearIndex,this.lastMonthIndex),this.currentYearIndex=0,this.currentMonthIndex=0,this.currentYear=s.getCurrentYear(this.currentYearIndex),this.currentMonth=s.getCurrentMonth(this.currentYearIndex,this.currentMonthIndex),this.loadedMarkerData=[],this.loadedMarkerDataDetail=[],this.baseImageUrl="http://s.xnimg.cn/apps/profile2/res/timeline/",this.isLoading=!1,this.currentHLMainNav=null,this.currentHLSubNav=null,this.timelineMainNavCacheList=[],this.timelineMarkerCacheList=[],this.currentHLDimension=null,this.preClickedYear=this.lastYear,this.preClickedMonth=this.lastMonth,this.scrollToInterval=1e3,this.motion=new XN.effect.Motion("easeOutStrong",this.scrollToInterval),this.bgColorInterval=1500,this.bgColorMotion=new XN.effect.Motion("easeOutStrong",this.bgColorInterval),this.highlightInterval=1e3,this.highlightMotion=new XN.effect.Motion("easeOutStrong",this.highlightInterval),this.singleFeedTargetTime="",this.singleFeedSourceId="",this.singleFeedStype="",this.singleFeedMarker=null,this.bornDom=Sizzle(".born",this.timelineWrapper)[0],this.bornMarker=Sizzle('*[data-time="born"]',this.timelineWrapper)[0],this.timelineMarkerCacheList.push(this.bornMarker),this.isVisitBorn=!1,this.canScrollBottomLoad=!0,this.domGlobalPublisher=i.getElement(".tl-left-module"),this.domFootPrint=$("footprint-box"),this.domSpecialFriend=$("specialfriend-box"),this.navFirstCreated=!1,XN.event.enableCustomEvent(this),this.init()},e.TL.prototype={init:function(){this.updateTLNavigation(),this.addFeed(null,null,this.isJumpFromLeFeed),this.bindEvent(),window.scroll(0,0)},bindEvent:function(){this.bindResizeEvent(),this.bindWindowScrollEvent(),this.bindTLNavClickEvent(),this.bindMarkerCombineYearClickEvent(),this.bindMarkerCombineMonthClickEvent(),this.bindHighlightClickEvent(),this.bindFeedDeleteEvent(),this.bindShowMoreClickEvent(),this.caculateTLNavPosition(),this.bindWpiToggleEvent()},isJumpFromLeFeed:function(){var e=getQueryStringByName("eventId"),t=getQueryStringByName("date"),n=getQueryStringByName("leAdd");""!=e&&""!=t&&(t=s.timeToYMD(t),this.submitFeedCallback(e,"1205",t.year,t.month,t.day)),1==n&&(i.getElement(".global-publisher-lifeevent-trigger").fireEvent("click"),$("normal_cover")?window.scrollTo(0,330):$("cover_image")&&"block"==$("cover_image").style.display?window.scrollTo(0,455):window.scrollTo(0,485))},caculateTLNavPosition:function(e){if(6!=o.ua.ie){var t=this;jQuery(document).bind("mainframe:reflow",function(e,n){var i=(jQuery(".bd-container").width()-860)/2+860+jQuery("#nxSlidebar").width()+20;t.timelineNavCon.style.left=i+"px",t.timelineNavCon.style.display="block"})}},bindWpiToggleEvent:function(){var e=this;window.addEvent("changeLayout",function(t){e.caculateTLNavPosition()})},bindResizeEvent:function(){var e=this;XN.event.addEvent(window,"resize",function(){e.isLoading||lastdayGuide||(e.caculateTLNavPosition(),e.viewportHeight=Dimension.getViewportHeight(),e.tlViewportHeight=e.viewportHeight-e.tlGapHeight,e.updateTLNavigation(),e.fireScrollHighlightEvent(!0))})},bindWindowScrollEvent:function(){var e=this;XN.event.addEvent(window,"scroll",function(t){var n=Dimension.getScrollLeft();n>0&&e.caculateTLNavPosition(n),e.fireScrollHighlightEvent(),e.canScrollBottomLoad&&e.scrollLoad(e.getDDObject())})},bindTLNavClickEvent:function(){function e(e){var n=XN.event.element(e);n=n.getAttribute("data-time")?n:n.parentNode;var i=n.getAttribute("data-time");"born"==i?(t.canScrollBottomLoad=!1,t.navigateToBorn()):t.navigateTo(i)}var t=this;i.wrap(this.timelineNavCon).delegate("ul > li","click",e),i.wrap(this.topAttachBar).delegate("*[data-time]","click",e)},bindMarkerCombineYearClickEvent:function(){var e=this;i.wrap(this.timelineCon).delegate(".timeline_marker_combine span","click",function(t){var n=XN.event.element(t).parentNode,i=n.data;e.addYearFromCombineMarker(i,n)})},bindMarkerCombineMonthClickEvent:function(){var e=this;i.wrap(this.timelineCon).delegate(".timeline_marker_combine_month span","click",function(t){var n=XN.event.element(t).parentNode,i=n.data,o=n.year;e.addMonthFromCombineMarker(n,o,i)})},bindShowMoreClickEvent:function(){var e=this;i.wrap(this.timelineCon).delegate(".show_more span","click",function(t){var n=XN.event.element(t).parentNode,i=XN.element.parent(n,"section"),o=getPrevSibling(i),a=o.getAttribute("data-time").split("-")[0],l=o.getAttribute("data-time").split("-")[1],d=s.toNum(n.getAttribute("data-offset")),h=s.toNum(n.getAttribute("data-count"));n.style.display="none",i.insertBefore(e.addLoading(),n),d+30>=h&&i.removeChild(n),r.getFeed(e.appendFeed,a,l,i,null,e,d)})},bindHighlightClickEvent:function(){function e(e,t){var n=Dimension.getScrollTop(),i=Dimension.getScrollTopObj(),a=Dimension.getXY(e).y-85;t.highlightMotion.onTweening=function(){i.scrollTop=this.equation(n,a)},o.ua.ie&&(XN.browser.IE8||XN.browser.IE7||XN.browser.IE6)?window.scroll(0,a):t.highlightMotion.tweening||t.highlightMotion.start()}var t=this;i.wrap(this.timelineCon).delegate(".highlight-btn","click",function(n){var i=XN.event.element(n),o=i.parentNode,a=XN.element.parent(i,".timeline_feed"),s=a.parentNode,l=XN.element.parent(i,"section"),d=l.id.substr(9),h=(l.getAttribute("eventId"),Sizzle('input[type="hidden"]',l)[0].value.split("-")[0]),u="&fromYear="+h+"&feedid="+d+"&highlight=";u+=a.getAttribute("data-highlight")||l.getAttribute("data-highlight")?"0":"1",r.operateHighlight(u,function(){var n=Sizzle(".le-photo img",a),i=Sizzle(".cover-photo img",a)[0];if(a.getAttribute("data-highlight")||l.getAttribute("data-highlight")){if(o.title="宽屏",a.getAttribute("data-highlight")){a.removeAttribute("data-highlight");for(var r=0;r<n.length;r++)n[r].src=n[r].getAttribute("data-small")}if(l.getAttribute("data-highlight")){l.removeAttribute("data-highlight");for(var r=0;r<n.length;r++)n[r].src=n[r].getAttribute("data-small")}for(var r=0;r<n.length;r++)n[r].removeAttribute("data-highlight"),n[r].style.marginTop=parseInt(n[r].style.marginTop)/2+"px",n[r].style.marginLeft=parseInt(n[r].style.marginLeft)/2+"px";i&&!isNaN(parseInt(i.style.marginTop))&&(i.style.marginTop=parseInt(i.style.marginTop)/2+"px")}else{a.setAttribute("data-highlight",!0),o.title="窄屏";for(var r=0;r<n.length;r++)n[r].setAttribute("data-highlight",1),n[r].style.marginTop=2*parseInt(n[r].style.marginTop)+"px",n[r].style.marginLeft=2*parseInt(n[r].style.marginLeft)+"px",n[r].src=n[r].getAttribute("data-large");i&&!isNaN(parseInt(i.style.marginTop))&&(i.style.marginTop=2*parseInt(i.style.marginTop)+"px")}var d=Sizzle(".timeline_feed",s);t.arrangeFeed(d),e(a,t)},t)})},bindFeedDeleteEvent:function(){var e=this;i.wrap(this.timelineCon).delegate(".menu-list .del, .menu-list-only .del","click",function(t){var n=XN.event.element(t),i=n.innerHTML,n=XN.element.parent(n,"section"),o=n.parentNode,a=n.id.substr(9),s=n.getAttribute("eventid")?n.getAttribute("eventid"):null,l=Sizzle('input[type="hidden"]',n)[0].value.split("-")[0],d="&fromYear="+l+"&feedid="+a+(s?"&eventid="+s:"");XN.DO.confirm({title:i,message:"你确定要"+i+"此条新鲜事吗？",callback:function(t){t&&(r.deleteFeed(d,function(){var t=o.parentNode;o.parentNode.removeChild(o),e.arrangeFeed(Sizzle(".timeline_feed",t))},e),s&&r.deleteLeFeed("lifeEventId="+s+"&guestId="+DS.getData("uid")))}})})},getDefautNavData:function(){var e=[];e.push("现在"),e.push(c.month+"月");for(var t in g)e.push(t);return e.push("出生"),e},getNavData:function(){var e=Math.floor(this.tlViewportHeight/this.standardHeight),t=this.getDefautNavData(),n=0,i=v+3;for(var o in g){var a=g[o].length;if(i+=a-1,e>=i){for(var r=t.indexOf(o),s=n;n+a>s;s++){var l=s==n?1:0;t.splice(r+s-n,l,m[s])}n+=a}}return t},createTLNavigation:function(e){for(var t="",n=0,o=e.length;o>n;n++){var a=s.toStr(e[n]);if("现在"==a)var r=l+"-"+d;else if("出生"==a)var r="born";else if(-1!=a.indexOf("月"))var r=c.year+"-"+c.month;else r=a;t+="现在"!=a||this.navFirstCreated?'<li data-time="'+r+'"><a href="javascript:;">'+a+"</a></li>":'<li class="current" data-time="'+r+'"><a href="javascript:;">'+a+"</a></li>"}this.timelineNavCon.innerHTML="<ul>"+t+'</ul><div id="ad_box">'+i.id("ad_box").innerHTML+"</div>",this.timelineMainNavCacheList=Sizzle("ul > li",this.timelineNavCon),this.navFirstCreated||(this.currentHLMainNav=Sizzle("li",this.timelineNavCon)[0]),this.navFirstCreated=!0},updateTLNavigation:function(){this.createTLNavigation(this.tlNavMinimumHeight>=this.tlViewportHeight?this.getDefautNavData():this.getNavData());var e=this,t=(jQuery(".bd-container").width()-860)/2+860+jQuery("#nxSlidebar").width()+20;e.timelineNavCon.style.left=t+"px",e.timelineNavCon.style.display="block"},addFeed:function(e,t,n){var i=this.newMarker(e,t);this.loadFeed(e,t,n);var o=this.currentOrLast(e);return s.loadedMarkerInQueue(o.year,this.loadedMarkerData),s.loadedMarkerDetailInQueue(o.year,o.month,this.loadedMarkerDataDetail),i},newMarker:function(e,t){var n=document.createElement("div"),i=e?e:"append",o=this.currentOrLast(e);if(o.year==l&&o.month==d)var a="现在";else var a=o.year+"年"+o.month+"月";n.className="timeline_marker",n.innerHTML="<span>"+a+"</span>",n.setAttribute("data-time",o.year+"-"+o.month),"append"!=i&&t?"insert"==i&&t.parentNode.insertBefore(n,t):this.timelineCon.appendChild(n);var r=this.timelineMarkerCacheList.pop();return this.timelineMarkerCacheList.push(n),this.timelineMarkerCacheList.sort(function(e,t){var n=e.getAttribute("data-time").split("-")[0],i=s.formatMonthData(e.getAttribute("data-time").split("-")[1]),o=s.toNum(n+i),a=t.getAttribute("data-time").split("-")[0],r=s.formatMonthData(t.getAttribute("data-time").split("-")[1]),l=s.toNum(a+r);return l-o}),this.timelineMarkerCacheList.push(r),o.year==h[0]&&o.month==u[0][0]&&(n.style.display="none"),n},newMarkerCombineYear:function(e){this.deleteAllYearCombine();for(var t=0;t<e.length;t++){var n=e[t][0],i=e[t][e[t].length-1],o=document.createElement("div");o.className="timeline_marker_combine",n==i?o.innerHTML="<span>显示"+n+"年</span>":o.innerHTML="<span>显示"+i+"-"+n+"年</span>",o.data=e[t];var a=h[s.getIndexThroughYear(n,h)-1],r=s.getLastDomMarkerInYear(a,this.timelineCon).nextSibling;r.nextSibling&&"timeline_marker_combine_month"==r.nextSibling.className&&(r=r.nextSibling),XN.dom.insertAfter(o,r)}},newMarkerCombineMonth:function(e,t){this.deleteAllMonthCombineInYear(e);for(var n=0;n<t.length;n++){var i=s.formatMonthData(t[n][0]),o=s.formatMonthData(t[n][t[n].length-1]),a=document.createElement("div");a.className="timeline_marker_combine_month",a.setAttribute("data-year",e),i==o?a.innerHTML="<span>显示"+e+"年 "+i+"月</span>":a.innerHTML="<span>显示"+e+"年 "+o+"月-"+i+"月</span>",a.data=t[n],a.year=e;var r=s.getIndexThroughYear(e,h),l=s.getIndexThroughMonth(r,i,u),d=u[r][l-1],c=s.getDomMarker(e+"-"+d,this.timelineCon).nextSibling;XN.dom.insertAfter(a,c)}},newShowMoreMarker:function(e,t,n,i,o){30>=i||(domShowMore=document.createElement("div"),domShowMore.className="show_more",domShowMore.setAttribute("data-offset",o||"30"),domShowMore.setAttribute("data-count",i),domShowMore.innerHTML="<span>显示 "+t+"-"+s.formatMonthData(n)+" 更多经历</span>",e.appendChild(domShowMore))},loadFeed:function(e,t,n){var i=document.createElement("section"),o=e?e:"append",a=this.currentOrLast(e);i.innerHTML='<div class="feed_loading"><img src="'+this.baseImageUrl+'feed_loading.gif" /></div>',"append"!=o&&t?"insert"==o&&t.parentNode.insertBefore(i,t):this.timelineCon.appendChild(i),this.isLoading=!0,r.getFeed(this.feedLoaded,a.year,a.month,i,n,this)},feedLoaded:function(e,t,n,i,o,a,r){e.length>0?this.newShowMoreMarker(t,n,i,a):this.removeLoading(t),this.timelineCon.style.paddingBottom="25px",this.isLoading=!1,r&&r.call(this),$("timeline_wrapper").offsetHeight<=1.5*Dimension.getViewportHeight()&&this.scrollLoad(this.getDDObject()),jQuery(".ft-wrapper").length&&jQuery(".ft-wrapper").css({position:"relative",top:"1px"}).delay(1).css("top",0),this.checkShareBtns()},checkShareBtns:function(){i.getElements(".privacy-trigger-feed").forEach(function(e){var t=e.getAttribute("title");if(t&&"公开"!==t){var n=i.wrap(e).getParent(".legend").getElement(".share_new");n&&n.hide()}})},arrangeFeed:function(e,t){if(!(e.length<=0)){var n,o,a="section"==e[0].tagName.toLowerCase()?e[0]:getFirstChild(e[0]),r=Sizzle('input[type="hidden"]',a)[0].value.split("-"),l=r[0],d=r[1],c=0,p=0;l==h[0]&&d==s.formatMonthData(u[0][0])?(this.domGlobalPublisher&&(c=this.domGlobalPublisher.offsetHeight+25),this.domFootPrint&&(p+=this.domFootPrint.offsetHeight+25),this.domSpecialFriend&&(p+=this.domSpecialFriend.offsetHeight+25)):c=p=0,n=c,o=p,t&&(t.innerHTML="");for(var m=0,f=e.length;f>m;m++){var g;if(e[m].style.display="block",t){var v=document.createElement("i");g=document.createElement("div"),g.appendChild(e[m]),g.appendChild(v),t.appendChild(g)}else g=e[m];e[m].getAttribute("data-highlight")||getFirstChild(e[m]).getAttribute("data-highlight")||i.getElement("form",e[m])?(c=p=n=o=0,g.className=this.commonName+" "+this.ttcName):p>=c?(g.className=this.commonName+" "+this.tlcName,Math.abs(o-c)<=8&&0!=o&&(g.className+=" overlap"),n=c,c+=g.offsetHeight+25):(g.className=this.commonName+" "+this.trcName,Math.abs(n-p)<=8&&(g.className+=" overlap"),o=p,p+=g.offsetHeight+25)}}},caculateFeedLoadedHeight:function(e,t){var n,i,o,a,r=e[e.length-1],s=r.className;if(-1!=s.indexOf(this.ttcName))n=i=o=a=0;else if(-1!=s.indexOf(this.tlcName)){var l=Dimension.getXY(r).y;n=o=l+r.offsetHeight+25;var d=getPrevSibling(r);if(-1!=d.className.indexOf(this.ttcName))i=a=l;else{var h=Sizzle(".tlr_feed",t);d=h[h.length-1],i=a=Dimension.getXY(d).y+d.offsetHeight+25}}else if(-1!=s.indexOf(this.trcName)){var l=Dimension.getXY(r).y;i=a=l+r.offsetHeight+25;var d=getPrevSibling(r);if(-1!=d.className.indexOf(this.ttcName))n=o=l;else{var u=Sizzle(".tll_feed",t);d=u[u.length-1],n=o=Dimension.getXY(d).y+d.offsetHeight+25}}return{leftHeight:n,rightHeight:i,tempLeftHeight:o,tempRightHeight:a}},arrangeSequenceFeed:function(e,t,n,i,o,a){var r=n.leftHeight,l=n.rightHeight,d=n.tempLeftHeight,c=n.tempRightHeight;if(this.removeLoading(o),0==e)if(i){var p=Sizzle(".timeline_feed",o),m=this.caculateFeedLoadedHeight(p,o);r=m.leftHeight,l=m.rightHeight,d=m.tempLeftHeight,c=m.tempRightHeight}else{var f="section"==t[0].tagName.toLowerCase()?t[0]:getFirstChild(t[0]),g=Sizzle('input[type="hidden"]',f)[0].value.split("-"),v=g[0],b=g[1];v==h[0]&&b==s.formatMonthData(u[0][0])?(this.domGlobalPublisher&&(r=this.domGlobalPublisher.offsetHeight+25),this.domFootPrint&&(l+=this.domFootPrint.offsetHeight+25),this.domSpecialFriend&&(l+=this.domSpecialFriend.offsetHeight+25)):r=l=0,d=r,c=l}for(var w=4*e,y=t.length;y>w;w++){var N;if(t[w].style.display="block",o){var _=document.createElement("i");N=document.createElement("div"),N.appendChild(t[w]),N.appendChild(_),o.appendChild(N)}else N=t[w];t[w].getAttribute("data-highlight")||getFirstChild(t[w]).getAttribute("data-highlight")?(r=l=d=c=0,N.className=this.commonName+" "+this.ttcName):l>=r?(N.className=this.commonName+" "+this.tlcName,Math.abs(c-r)<=14&&0!=c&&(N.className+=" overlap"),d=r,r+=N.offsetHeight+25):(N.className=this.commonName+" "+this.trcName,Math.abs(d-l)<=14&&(N.className+=" overlap"),c=l,l+=N.offsetHeight+25)}return a||N.parentNode.appendChild(this.addLoading()),{leftHeight:r,rightHeight:l,tempLeftHeight:d,tempRightHeight:c}},appendFeed:function(e,t,n,i,o){var a=Sizzle(".show_more",t)[0];a&&(t.appendChild(a),a.style.display="block",a.setAttribute("data-offset",o+30))},navigateTo:function(e,t){if(e=s.getNavigatedTime(e),!e){if(XN.browser.IE)return void window.scroll(0,0);e=c}var n=e.year+"-"+e.month,i=this.hasMarker(n);if(e.year!=this.preClickedYear&&(this.newMarkerCombineMonth(this.preClickedYear,s.getGapMonthSection(this.preClickedYear,this.preClickedMonth,this.loadedMarkerDataDetail,"false")),this.preClickedYear=e.year,this.preClickedMonth=e.month),!i){var o=s.getInsertedPosition(e.year,e.month,this.loadedMarkerDataDetail,this.timelineCon);if(o){this.setCurrentYearMonthData(e);var a=this.addFeed("insert",o,t);t||this.scrollToInserted(a)}else{this.setLastYearMonthData(e);var a=this.addFeed(null,null,t);t||this.scrollToBottom(a)}return this.isVisitBorn?(this.newMarkerCombineMonth(e.year,s.getGapMonthSection(e.year,e.month,this.loadedMarkerDataDetail,"false")),this.newMarkerCombineYear(s.getGapYearSection(this.loadedMarkerData,!0))):(this.newMarkerCombineMonth(e.year,s.getGapMonthSection(e.year,e.month,this.loadedMarkerDataDetail)),this.newMarkerCombineYear(s.getGapYearSection(this.loadedMarkerData))),a}this.scrollToInserted(i)},navigateToBorn:function(){this.isVisitBorn||(this.newMarkerCombineMonth(this.preClickedYear,s.getGapMonthSection(this.preClickedYear,this.preClickedMonth,this.loadedMarkerDataDetail,"false")),this.newMarkerCombineYear(s.getGapYearSection(this.loadedMarkerData,!0)),this.isVisitBorn=!0,this.canScrollBottomLoad=!1),this.scrollToInserted(this.bornDom)},scrollToBottom:function(e){var t=Dimension.getScrollTop(),n=Dimension.getScrollTopObj(),i=Dimension.getXY(e).y;o.ua.ie&&(XN.browser.IE8||XN.browser.IE7||XN.browser.IE6)?(this.timelineCon.style.paddingBottom=(this.viewportHeight-440>0?this.viewportHeight-440:0)+"px",window.scroll(0,i)):this.motion.tweening||(this.timelineCon.style.paddingBottom=(this.viewportHeight-440>0?this.viewportHeight-440:0)+"px",this.motion.start()),this.motion.onTweening=function(){n.scrollTop=this.equation(t,i)},this.motion.onComplete=function(){}},scrollToInserted:function(e,t){var n=Dimension.getScrollTop(),a=Dimension.getScrollTopObj(),r=Dimension.getXY(e).y,s=this;this.motion.onTweening=function(){a.scrollTop=this.equation(n,r-31-54)},this.motion.onComplete=function(){t&&(s.bgColorMotion.onTweening=function(){var t=Math.round(this.equation(245,255)).toString(16),n=Math.round(this.equation(246,255)).toString(16),i=Math.round(this.equation(161,255)).toString(16);"section"==e.tagName.toLowerCase()?e.style.backgroundColor="#"+t+n+i:getFirstChild(e).style.backgroundColor="#"+t+n+i},s.bgColorMotion.start()),"born-le"==e.id&&s.fireEvent("scrollToBornComplete"),"601"==i.getElement("section",e).getAttribute("eventtype")&&lastdayGuide&&s.fireEvent("scrollToCoverComplete")},o.ua.ie&&(XN.browser.IE8||XN.browser.IE7||XN.browser.IE6)?(window.scroll(0,r-31-54),"601"==i.getElement("section",e).getAttribute("eventtype")&&lastdayGuide&&s.fireEvent("scrollToCoverComplete")):this.motion.tweening||this.motion.start()},addYearFromCombineMarker:function(e,t){var n=e.pop(),i=s.getIndexThroughYear(n,h),o=u[i][0],a=0,r=getNextSibling(t);this.setCurrentYearMonthData({year:n,yearIndex:i,month:o,monthIndex:a}),this.addFeed("insert",r),0==e.length?t.parentNode.removeChild(t):1==e.length?t.innerHTML="<span>显示"+e[0]+"年</span>":t.innerHTML="<span>显示"+e[e.length-1]+"-"+e[0]+"年</span>",n==h[h.length-1]?this.newMarkerCombineMonth(n,s.getGapMonthSection(n,o,this.loadedMarkerDataDetail,"false")):this.newMarkerCombineMonth(n,s.getGapMonthSection(n,o,this.loadedMarkerDataDetail)),this.scrollToInserted(r)},addMonthFromCombineMarker:function(e,t,n){var t=t,i=s.getIndexThroughYear(t,h),o=n.shift(),a=s.getIndexThroughMonth(i,o,u);this.setCurrentYearMonthData({year:t,yearIndex:i,month:o,monthIndex:a});var r=this.addFeed("insert",e);this.scrollToInserted(r),0==n.length?e.parentNode.removeChild(e):1==n.length?e.innerHTML="<span>显示"+t+"年 "+s.formatMonthData(n[0])+"月</span>":e.innerHTML="<span>显示"+t+"年 "+s.formatMonthData(n[n.length-1])+"月-"+s.formatMonthData(n[0])+"月</span>"},scrollLoad:function(e){if(e.scrollTop>e.documentHeight-e.viewportHeight-this.scrollBottomGapHeight&&!this.isLoading){var t=s.getNextTimeMarker(this.lastYearIndex,this.lastMonthIndex);t&&(this.setLastYearMonthData(t),this.timelineCon.style.paddingBottom=(this.viewportHeight-440>0?this.viewportHeight-440:0)+"px",this.addFeed())}},createSubTimelineNav:function(e,t){for(var n=document.createElement("ol"),i=0,o=e.length;o>i;i++){var a=document.createElement("li");t?(a.setAttribute("data-time",t+"-"+e[i]),a.innerHTML='<a href="#nogo">'+e[i]+"月</a>"):(a.setAttribute("data-time",e[i]),a.innerHTML='<a href="#nogo">'+e[i]+"</a>"),n.appendChild(a)}this.currentHLMainNav.appendChild(n),this.currentHLMainNav.subnav=n},highlightMainTimelineNav:function(e){function t(e){return this.currentHLMainNav!=e?(this.currentHLMainNav&&(this.currentHLMainNav.className=""),this.currentHLMainNav&&this.currentHLMainNav.subnav&&hasChild(this.currentHLMainNav,this.currentHLMainNav.subnav)&&(this.currentHLMainNav.removeChild(this.currentHLMainNav.subnav),this.currentHLMainNav.subnav=null),this.currentHLMainNav=e,this.currentHLMainNav.className="current",!0):!1}for(var n=this.timelineMainNavCacheList,i=e.substr(0,3)+"0s",o=e.split("-")[0],a=(e.split("-")[1],0),r=n.length;r>a;a++){var l=n[a].getAttribute("data-time");if(l==e){t.call(this,n[a]);break}if(l==o){if(t.call(this,n[a])){var d=f[s.getIndexThroughYear(o,m)];this.createSubTimelineNav(d,o);break}}else if(l==i&&t.call(this,n[a])){var h=g[i];this.createSubTimelineNav(h);break}}},highlightSubTimelineNav:function(e){for(var t=Sizzle("ol > li",this.timelineNavCon),n=e.split("-")[0],i=(e.split("-")[1],0),o=t.length;o>i;i++){var a=t[i].getAttribute("data-time");if(a==e||a==n){this.currentHLSubNav!=t[i]&&(this.currentHLSubNav&&(this.currentHLSubNav.className=""),this.currentHLSubNav=t[i],this.currentHLSubNav.className="current");break}}},fireScrollHighlightEvent:function(e){for(var t=this.timelineMarkerCacheList,n=Dimension.getScrollTop()+Dimension.getViewportHeight()/2.5,i="",o=null,a=0,r=t.length;r>a;a++){var s=Dimension.getXY(t[a]).y;if(n>=s)if(a==r-1)i=t[a].getAttribute("data-time"),o=t[a];else{var l=Dimension.getXY(t[a+1]).y;if(l>n){i=t[a].getAttribute("data-time"),o=t[a];break}}}""==i&&(i=t[0].getAttribute("data-time")),(e||""!=i&&o!=this.currentHLDimension)&&(this.highlightMainTimelineNav(i),this.highlightSubTimelineNav(i),window.timelineTopAttachBar&&window.timelineTopAttachBar.highlightCurrentTime(i),this.currentHLDimension=o)},submitFeedCallback:function(e,t,i,o,a,r){var l=this.getInsertedFeedTime(i,o,a),i=i.toString(),d=o=l.month,a=l.day,c=i+"-"+o,p=s.getDomMarker(c,this.timelineCon),m=s.getIndexThroughYear(i,h),f=-1;if(-1!=m&&(f=s.getIndexThroughMonth(m,o,u)),this.singleFeedTargetTime=parseInt(i+s.formatMonthData(o)+s.formatMonthData(a)),this.singleFeedSourceId=e,this.singleFeedStype=t,CoverInfo.uid!=CoverInfo.profileid&&r){var g=i+"-"+s.formatMonthData(o)+"-"+s.formatMonthData(a);return void(window.location.href="http://www.renren.com/"+CoverInfo.profileid+"/profile?eventId="+e+"&date="+g)}if(sleep(200),p)this.singleFeedMarker=p,this.retrieveSingleFeed();else{if(-1==m||-1==f){if(-1==m&&-1==f){var v=s.addYear(i);s.addMonth(v,d,!1),window.timelineTopAttachBar&&window.timelineTopAttachBar.appendYearToMenu(i)}else s.addMonth(m,d,!0);n(),this.updateTLNavigation()}this.singleFeedMarker=this.navigateTo(c,this.retrieveSingleFeed)}},retrieveSingleFeed:function(){r.retrieveSingleFeed(this.singleFeedSourceId,this.singleFeedStype,this.insertedFeed,this)},checkFeed:function(e,t,n,o){var a=getFirstChild(t).id,r=null,s="";if(e.length<=0)return n.appendChild(t),void this.scrollToInserted(t,!0);if(r=i.id(a))s="precise";else for(var l=0,d=e.length;d>l;l++){var h=getFirstChild(e[l]),u=parseInt(Sizzle('input[type="hidden"]',h)[0].value.split("-").join(""));h.id;if(r=e[l],this.singleFeedTargetTime>=u){s="before",e.splice(l,0,t);break}s="after"}if("precise"==s)this.scrollToInserted(r,!0);else if("before"==s)r.parentNode.insertBefore(t,r),this.arrangeFeed(e),this.scrollToInserted(t,!0);else if("after"==s){if(o){var c=this.caculateFeedLoadedHeight(e,n),p=c.leftHeight,m=c.rightHeight;m>=p?t.className=this.commonName+" "+this.tlcName:t.className=this.commonName+" "+this.trcName}XN.dom.insertAfter(t,r),this.scrollToInserted(t,!0)}},insertedFeed:function(e){var t=document.createElement("div"),n=document.createElement("i"),i=!1;XN.browser.IE?t.appendChild(parseHTML5Tags(e)):t.innerHTML+=e,t.appendChild(n);var o=getFirstChild(t);o.getAttribute("eventid")&&o.getAttribute("data-highlight")?(t.className="timeline_feed tlf_feed",t.setAttribute("data-highlight",!0)):(t.className="timeline_feed",i=!0);var a=getNextSibling(this.singleFeedMarker),r=Sizzle(".timeline_feed",a);this.checkFeed(r,t,a,i)},currentOrLast:function(e){return e=e?e:"append","append"==e?{year:this.lastYear,month:this.lastMonth}:{year:this.currentYear,month:this.currentMonth}},setLastYearMonthData:function(e){this.lastYear=e.year,this.lastYearIndex=e.yearIndex,this.lastMonth=e.month,this.lastMonthIndex=e.monthIndex},setCurrentYearMonthData:function(e){this.currentYear=e.year,this.currentYearIndex=e.yearIndex,this.currentMonth=e.month,this.currentMonthIndex=e.monthIndex},hasMarker:function(e){return Sizzle('[data-time="'+e+'"]',this.timelineCon)[0]},deleteAllYearCombine:function(){var e=Sizzle(".timeline_marker_combine",this.timelineCon);e.forEach(function(e){e.parentNode.removeChild(e)})},deleteAllMonthCombineInYear:function(e){var t=Sizzle('[data-year="'+e+'"]',this.timelineCon);t.forEach(function(e){e.parentNode.removeChild(e)})},addLoading:function(){var e=document.createElement("div");return e.className="feed_loading",e.innerHTML='<img src="'+this.baseImageUrl+'feed_loading.gif" />',e},removeLoading:function(e){var t=Sizzle(".feed_loading",e)[0];t.parentNode.removeChild(t)},getAllYearData:function(){return h},getAllMonthData:function(){return u},isFirstMonth:function(e,t){return e==h[0]&&t==u[0][0]},getInsertedFeedTime:function(e,t,n){return"0"==t&&(t=e==l.toString()?d.toString():"12"),"0"==n&&(n=t==d.toString()?(new Date).getDate().toString():s.getLastDayFromMonth(e,t).toString()),{month:t,day:n}},getDDObject:function(){var e={};return e.scrollTop=Dimension.getScrollTop(),e.viewportHeight=Dimension.getViewportHeight(),e.documentHeight=Dimension.getDocumentHeight(),e}}}),define(function(require){var e=require("jquery"),t={init:function(){var n=e("#time-machine-side");n[0]&&(n.delegate(".close-bubble","click",function(){e("#time-machine-bubble").css("display","none")}),e(document).on("webpager:folded",function(){n.css("display","block")}),e(document).on("webpager:unfolded",function(){n.css("display","none")})),t.mvideoPlay()},mvideoPlay:function(){require(["ui/renren/mvideo"],function(){e("body").on("mouseover",".micro-video-one",function(){var t=e(this).prop("href").match(/\d+/g);e(this).renrenmvideo({width:300,height:300,screenshot:e(this).find("img").prop("src"),ownerId:t[0],videoId:t[1]})})})}};e(document).ready(function(){t.init()})}),object.use("dom, events, xn/profile/Cover, xn/profile/Timeline, xn/profile/lifeeventEdit, xn/profile/log, xn/profile/leslider, xn.net",function(e,t,n,i,o,a,r){function s(){var e=Sizzle("#cover .avatar")[0],t=Sizzle("#cover .avatar_edit")[0];t&&(XN.event.addEvent(e,"mouseover",function(e){t.style.display="block"}),XN.event.addEvent(e,"mouseleave",function(e){t.style.display="none"}))}function l(){var e=Sizzle(".hometown")[0];e&&(e.innerHTML=stringCut(e.innerHTML,8))}window.profileActionLog=new a.actionLog,XN.dom.ready(function(){window.globalCoverObj=new n.Cover;new o.leEdit;window.globalTimeline=new i.TL,window.leslider=new r.LeSlider(e.getElement("#global-publisher-box .le-slider")),s(),l();try{e.getElements(".fd-nav-item")[0].addClass("fd-nav-cur-item")}catch(t){}define(function(require,e){require("photo/avatarUpload");var t=jQuery.noConflict();t(".avatar_edit h1").click(function(){var e=t("#largepic")[0];require(["photo/avatarUpload"],function(){var n={width:e.width,height:e.height,type:"large",albumType:1,url:e.src};t.renren.avatarupload({photoItem:n,onSubmitAfter:function(n){t("#userpic")[0].src="http://hdn.xnimg.cn/photos/"+n[1].url,e.src=n[2].url},isAvatar:!0})})})});var a=Sizzle("#cover .user-type")[0];a&&(XN.event.addEvent(a,"mouseover",function(e){Sizzle("#cover .more-tip")[0].style.display="block";
}),XN.event.addEvent(a,"mouseout",function(e){Sizzle("#cover .more-tip")[0].style.display="none"}))}),HTML5History.bind(window.history,{fireEvent:function(t,n){e.Element.prototype.fireEvent.call(t,n)},blankHTML:"/ajaxproxy.htm"})}),window.location.pathname.match(/^\/121947331\//)&&require(["jquery","ui/dialog"],function(e){var t='<div style="position: relative; overflow: hidden; font-size: 2em;">';t+='<h1 style="font-size: 4em; text-align: center;">致歉声明</h1>',t+="<p>尊敬的王芳女士：</p>",t+='<p style="margin: 1em 0;">2014年前后，一注册用户利用其人人网个人主页擅自发布侵权照片及非法言论对您进行故意打击，严重违反了我国法律和我司服务条款，根据法院调查令，我司已向您提供该侵权用户的相关信息，并依法删除所有侵权内容，同时封禁侵权用户。</p>',t+='<p style="margin: 1em 0;">由于未能及时采取有效措施，给您造成的损害扩大我司对此向您致以诚挚的歉意！并同时承诺，协助您追究该侵权用户的侵权责任，尽量避免此类事件的再度发生。</p>',t+='<p style="margin: 1em 0;">希望您能继续支持和使用“人人网”，并对我们日后的工作和服务提出您宝贵的意见！</p>',t+='<p style="float: right;">人人网</p>',t+='<p style="float: right;clear: both;">2015年7月22日</p>',t+="</div>",e(t).dialog({width:"80%"})}),object.define("xn/profile/friendarea","dom, events",function(require,e){require("dom"),require("events");e.Area=new Class(function(){this.profileOwnerId=profileOwnerId,this.profileOwnerName=profileOwnerName,this.friendMenu=$("menuFriend"),this.gpDomElement=$("groupList"),this.initialize=function(e){e.bindSetting(),e.bindSpecialFollow(),e.bindCancelFollow(),e.bindDelFriend(),e.bindAddHotFriend(),e.bindDelHotFriend(),e.bindAddBlock(),e.bindIntroduceFriend(),e.bindMarkName(),e.sendAgain(),e.bindFollowBtn(),e.bindRemoveBlock(),e.followSend()},this.bindSetting=function(e){var t=$("settingMenu"),n=$("settingList");t&&n&&(XN.event.addEvent(t,"click",function(e){XN.event.stop(e);var t=XN.event.element(e),i=t.offsetLeft,o=t.offsetTop,a=t.offsetWidth,r=t.offsetHeight;n.style.top=o+r+"px",n.style.left=i+a-53+"px",n.style.display="block"}),XN.event.addEvent(document,"click",function(e){var t=XN.event.element(e),i=getParentFromClass(t,"friend-area");i||(n.style.display="none")}))},this.bindSpecialFollow=function(e){var t=$("specialFollow");t&&XN.event.addEvent(t,"click",function(t){var n=XN.event.element(t).parentNode;e.specialFollow(n)})},this.specialFollow=function(e,t){XN.DO.confirm({title:"添加好友至特别关注",message:['<div style="line-height:2">',"	<h3><strong>订阅"+e.profileOwnerName+"的新鲜事</strong></h3>",'	<p><label><input id="set-attention-newsfeed" checked="checked" type="checkbox"/> 添加至新鲜事特别关注</label> </p>',"</div>"].join(""),callback:function(t){if(t){var n=$("set-attention-newsfeed").checked;n&&new XN.net.xmlhttp({url:"http://www."+XN.env.domain+"/relationFeedOper.do",data:"action=addHigh&id="+e.profileOwnerId,onSuccess:function(t){var n=JSON.parse(t.responseText);1==n.code?XN.DO.showError("网络通讯失败，请稍后再试。"):2==n.code?XN.DO.alert("你关注的名单已经达到上限"):3==n.code?XN.DO.alert("你已经添加过该好友"):4==n.code?XN.DO.alert("很抱歉，你们不是好友，只能将好友添加至关注名单。"):0==n.code&&(XN.DO.showMsg("添加成功！","","3"),e.friendMenu.innerHTML="<span>特别关注</span>")}})}}})},this.bindCancelFollow=function(e){var t=$("cancelFollow");t&&XN.event.addEvent(t,"click",function(t){var n=XN.event.element(t).parentNode;e.cancelFollow(n)})},this.cancelFollow=function(e,t){XN.DO.confirm({title:"取消特别关注",message:'您确定要取消对<b>"'+e.profileOwnerName+'"</b>的特别关注吗？',callback:function(t){t&&new XN.net.xmlhttp({url:"http://www."+XN.env.domain+"/relationFeedOper.do",data:"action=delHigh&id="+e.profileOwnerId,onSuccess:function(t){var n=XN.json.parse(t.responseText);0==n.code?(XN.DO.showMsg("特别关注已取消！","","3"),e.friendMenu.innerHTML="<span>好友</span>"):XN.DO.showError("网络通讯失败，请稍后再试。")}})}})},this.bindDelFriend=function(e){var t=$("delFriend");t&&XN.event.addEvent(t,"click",function(){e.delFriend()})},this.delFriend=function(e){function t(t,n){return""==t?void XN.DO.showError("请输入验证码！"):void new XN.NET.xmlhttp({url:"http://friend."+XN.env.domain+"/DelFriend.do",data:"id="+e.profileOwnerId+"&code="+t+"&codeFlag="+n,method:"post",onSuccess:function(e){try{var t=XN.JSON.parse(e.responseText);if(0!=t.ret)throw t.ret;XN.DO.showMessage("请求已生效，稍后你们的好友关系会自动解除"),setTimeout(function(){location.href="http://www."+XN.env.domain+"/Home.do"},2e3)}catch(n){XN.DO.showError(-1==n?"验证码错误":"删除好友失败")}},onError:function(){XN.DO.showError("删除好友失败")}})}var n=0,i=XN.DO.confirm({title:"解除好友关系",message:"<b>Loading...</b>",callback:function(e){e&&t($("verifyCode")?$("verifyCode").value:null,n)}});i.footer.hide(),new XN.net.xmlhttp({url:"http://friend."+XN.env.domain+"/BeforeDeleteFriend.do",data:"temp="+(new Date).getTime(),onSuccess:function(t){var o=XN.json.parse(t.responseText);n=o.code,0==n?(i.setBody('确定和<b>"'+e.profileOwnerName+'"</b>解除好友关系吗？'),i.footer.show()):1==n?(i.setBody('确定和<b>"'+e.profileOwnerName+'"</b>解除好友关系吗？<div style="padding:8px 0;">验证码:<input type="text"class="inputtext" id="verifyCode"/><img id="verify_code_img" src="http://icode.'+XN.env.domain+"/getcode.do?t=delfriend_&temp="+(new Date).getTime()+'" style="display:block;vertical-align:baseline;margin-left:5px;width:123px;height:46px;" /><a href="javascript:;" onclick="$(\'verify_code_img\').src=\'http://icode.'+XN.env.domain+"/getcode.do?t=delfriend_&r='+Math.random();return false;\">看不清或看不见？换一张</a></div>"),i.footer.show()):(i.hide(),XN.DO.showError("服务器异常,请稍后再试!"))},onError:function(){XN.DO.showError("服务器异常,请稍后再试!")}})},this.bindAddHotFriend=function(e){var t=$("addHotFriend");t&&XN.event.addEvent(t,"click",function(){"0"==isStar?XN.DO.confirm({modal:!0,message:'只有星级用户才能添加特别好友！现在就去<a href="http://www.'+XN.env.domain+'/notselectuser.do">申请星级用户</a>!',callBack:function(e){e&&(window.location.href="http://www."+XN.env.domain+"/notselectuser.do")}}):e.addHotFriend()})},this.addHotFriend=function(e,t){XN.DO.confirm({title:"添加特别好友",message:'确定将<b>"'+e.profileOwnerName+'"</b>添加为特别好友吗？',callback:function(t){t&&new XN.net.xmlhttp({url:"http://friend."+XN.env.domain+"/addhotfriendjson.do",data:"post={id:"+e.profileOwnerId+"}",onSuccess:function(t){var n=XN.json.parse(t.responseText);XN.DO.showMsg(n.msg,"","3"),"添加特别好友成功"==n.msg&&(e.friendMenu.innerHTML="<span>特别好友</span>")},onError:function(){XN.DO.showError("服务器异常,请稍后再试!")}})}})},this.bindDelHotFriend=function(e){var t=$("delHotFriend");t&&XN.event.addEvent(t,"click",function(t){var n=XN.event.element(t).parentNode;e.delHotFriend(n)})},this.delHotFriend=function(e,t){XN.DO.confirm({title:"解除特别好友",modal:!0,message:'确定将<b>"'+e.profileOwnerName+'"</b>移出特别好友吗？<br />此操作将不会解除你们之间的好友关系。<br />',callback:function(t){t&&new XN.net.xmlhttp({url:"http://friend."+XN.env.domain+"/deletehotfriend.do",data:"id="+e.profileOwnerId,onSuccess:function(t){var n=XN.json.parse(t.responseText),i=e.friendMenu.getAttribute("data-id"),o=e.friendMenu.getAttribute("data-group"),a='<button id="menuFriend" class="ui-button ui-button-default btn-follow relation-other" data-group="'+o+'" data-id="'+i+'">                                                <span class="ui-icon ui-iconfont">&#xe824</span>                                                <span class="ui-button-text friend-span">好友</span>                                            </button>';0==n.code?(XN.DO.showMsg("解除特别好友成功！","","3"),e.friendMenu.outerHTML=a):1==n.code&&XN.DO.showError("解除特别好友失败!")},onError:function(){XN.DO.showError("服务器异常,请稍后再试!")}})}})},this.bindAddBlock=function(e){var t=$("addBlock");t&&XN.event.addEvent(t,"click",function(){e.addBlock()})},this.addBlock=function(e){XN.DO.confirm({title:"加入黑名单",message:"确定将"+e.profileOwnerName+"加入黑名单吗？",callback:function(t){t&&new XN.net.xmlhttp({url:"http://friend."+XN.env.domain+"/j_f_add_block",data:"id="+e.profileOwnerId,onSuccess:function(e){},onError:function(){XN.DO.showError("服务器异常,请稍后再试!")}})}})},this.bindIntroduceFriend=function(e){var t=$("introduceFriend");t&&XN.event.addEvent(t,"click",function(){showRecommendedFriendDialog(e.profileOwnerId,e.profileOwnerName)})},this.bindMarkName=function(e){var t=$("signature");t&&(window.scrollTo(0,0),XN.event.addEvent(t,"click",function(){window.scrollTo(0,0);XN.DO.alert({title:"签名档",message:'<iframe src="http://dev.renren.com/website/sig?origin=20001" scrolling="no" frameborder="0" style="border:none;width: 540px;height:460px"></iframe>',width:580,Y:50,modal:!0,showCloseButton:!0,noFooter:!0})}))},this.sendAgain=function(e){var t=$("sendAgain");t&&(XN.event.addEvent(t,"mouseover",function(){t.innerHTML="重新发送请求"}),XN.event.addEvent(t,"mouseout",function(){t.innerHTML="请求已发送"}))},this.followSend=function(e){define(function(require){var e=require("jquery"),t=e("#followAdd");t.mouseover(function(){t.renrenrelationFollow({addAction:function(t){e(".friend-area .btn-follow").removeClass("ui-button-green").addClass("ui-button-default relation-other").data("flag",1).html('<span class="ui-icon ui-iconfont">&#xe834;</span><span class="ui-button-text">好友</span>'),e("#settingList").find("li:eq(0)").remove().hide()}})})})},this.bindRemoveBlock=function(e){define(function(require,t){var n=require("jquery"),i=n("#removeBlock");require("ui/dialog"),i.on("click",function(){var t=i.data("id"),o=i.data("isblock");return o?(n.get("http://www.renren.com/RemoveBlock.do?id="+t,function(e){1===e.rc?i.data("isblock",!1).text("加入黑名单"):n.dialog.error("服务器异常,请稍后重试")},"json"),!1):(n.dialog.confirm("确定将"+e.profileOwnerName+"加入黑名单吗？",function(){n.post("http://friend.renren.com/j_f_add_block?id="+t,function(e){1===e.rc?i.data("isblock",!0).text("移出黑名单"):n.dialog.error("服务器异常,请稍后重试")},"json")}),!1)})})},this.bindFollowBtn=function(e){define(function(require,e){var t=require("jquery");require("ui/renren/relationFollow");var n=t("#followAdd");(0==n.data("flag")||1==n.data("flag"))&&n.mouseover(function(){n.renrenrelationFollow({friendAction:function(e){n.removeClass("ui-button-green").addClass("ui-button-default relation-other").data("flag",-1).html("<span class='ui-button-text'>申请中...</span>")}})})})}})}),XN.dom.ready(function(){object.use("xn/profile/friendarea",function(e){new e.Area})}),XN.dynamicLoad({file:"http://s.xnimg.cn/jspro/xn.app.addFriend.js",funcs:["showRequestFriendDialog"]}),XN.dynamicLoad({files:["http://s.xnimg.cn/a11667/csspro/module/poke.css","http://s.xnimg.cn/a19692/jspro/xn.app.poke.js"],funcs:["doPoke"]}),XN.dynamicLoad({file:"http://s.xnimg.cn/a20457/jspro/xn.app.recommendFriend.js",funcs:["showRecommendedFriendDialog","sendRecommendedFriend"]}),XN.dynamicLoad({file:"http://s.xnimg.cn/a54606/jspro/xn.app.share.js",funcs:["create_share_div","pop_share","create_share_feed","school_bbs_share"]}),object.define("xn/profile/groupedit","dom, events",function(require,e){var t=require("dom");require("events");e.Groupedit=new Class(function(){this.triggerClassname=$("menuFriend"),this.gpDomElement=$("groupList"),this.friendList=$("friendList"),this.currUid=profileOwnerId,this.interval=null,this.interTime=300,this.initialize=function(e){e.bindGpBtnEvent(),e.bindGpConEvent()},this.editGroup=function(e,t,n){new XN.net.xmlhttp({url:"http://friend."+XN.env.domain+"/editGroup.do",method:"post",data:"post="+t,onSuccess:function(e){},onError:function(){new XN.DO.showMsg("通信错误")}})},this.bindGpBtnEvent=function(e){e.triggerClassname&&(e.bindGpSelectEvent(),e.bindGpShow(),e.initList(),define(function(require,t){var n=require("jquery");n(".friend-area").on("click","#menuFriend",function(t){XN.event.stop(t);var n=XN.event.element(t);"friend-span"==n.className&&(n=getParentFromClass(n,"friend-btn")),e.setGp(n),e.showGp(n)})}),XN.event.addEvent(document,"click",function(t){var n=XN.event.element(t),i=getParentFromClass(n,"friend-area");i||e.hideGp(n)}))},this.bindGpConEvent=function(e){e.friendList&&XN.event.addEvent(e.friendList,"mouseover",function(t){e.clearTimer()})},this.initList=function(e){var t=Sizzle("li",e.gpDomElement);t.length>4&&(e.gpDomElement.style.height="96px",e.gpDomElement.style.overflowY="hidden")},this.bindGpShow=function(e){XN.event.addEvent($("showGp"),"click",function(t){var n=XN.event.element(t),i=e.gpDomElement.getStyle("height"),o=Sizzle("li",e.gpDomElement);5==o.length?e.gpDomElement.style.height="120px":6==o.length?e.gpDomElement.style.height="144px":7==o.length?e.gpDomElement.style.height="168px":8==o.length?e.gpDomElement.style.height="192px":o.length>8?(e.gpDomElement.style.height="192px",e.gpDomElement.style.overflowY="scroll"):(e.gpDomElement.style.height=i,e.gpDomElement.style.overflow="visible"),n.parentNode.style.display="none"})},this.bindGpSelectEvent=function(e){t.wrap(e.gpDomElement).delegate("li","click",function(t){var n=XN.event.element(t);"li"!=n.tagName.toLowerCase()&&(n=n.parentNode);var i=Sizzle("a",n)[0].innerHTML;XN.element.hasClassName(n,"selected")?(XN.element.delClass(n,"selected"),e.syncGp(i,"delete")):(n.className="selected",e.syncGp(i,"append"));var o=e.getGpNames();e.editGroup('{"action":"addmultgroups","names":['+o.toString()+'],"buddys":"'+e.currUid+'"}')})},this.showGp=function(e,t){var n=(t.offsetLeft,t.offsetTop),i=t.offsetHeight;t.offsetWidth;e.friendList.style.top=n+i+"px",e.friendList.style.right="63px",e.friendList.style.display="block"},this.hideGp=function(e,t){e.interval=setTimeout(function(){e.friendList.style.display="none"},e.interTime)},this.setGp=function(e,t){e.unsetGp();var n=XN.string.trim(t.getAttribute("data-group"));if(n.length>0){n=n.split(" ");for(var i=Sizzle("li",e.gpDomElement),o=0,a=n.length;a>o;o++)for(var r=0,s=i.length;s>r;r++)n[o]!=Sizzle("a",i[r])[0].innerHTML||(i[r].className="selected")}},this.unsetGp=function(e){Sizzle("li",e.gpDomElement).forEach(function(e,t){e.className=""})},this.syncGp=function(e,t,n){if("append"==n)e.triggerClassname.setAttribute("data-group",e.triggerClassname.getAttribute("data-group")+" "+t);else if("delete"==n){var i=XN.string.trim(e.triggerClassname.getAttribute("data-group")).split(" ");i.forEach(function(e,n){t==e&&i.splice(n,1)}),e.triggerClassname.setAttribute("data-group",i.join(" "))}},this.resetBtnStyle=function(e,t){Sizzle(".alf-selected").forEach(function(e,n){e!=t&&XN.element.delClass(e,"alf-selected")})},this.clearTimer=function(e){e.interval&&(clearTimeout(e.interval),e.interval=null)},this.initNewGpInput=function(e){new XN.form.inputHelper(e.newGpInput).setDefaultValue("新建分组"),XN.event.addEvent(e.newGpInput,"keydown",function(t){var t=t||window.event;if(13==t.keyCode){var n=XN.event.element(t),i=n.value,o=e.gpDomElement.getStyle("height");if(e.checkGpName(i)){var a=e.getGpNames();a.push('"'+i+'"'),e.appendGpName(i),n.value="",e.editGroup('{"action":"create","name":"'+i+'"}'),e.editGroup('{"action":"addmultgroups","names":['+a.toString()+'],"buddys":"'+e.currUid+'"}'),e.syncGp(i,"append"),e.gpDomElement.style.height=parseInt(o)+24+"px"}}}),XN.event.addEvent($("newGpBtn"),"click",function(t){var n=e.newGpInput.value,i=e.gpDomElement.getStyle("height");if(e.checkGpName(n)){var o=e.getGpNames();o.push('"'+n+'"'),e.appendGpName(n),e.newGpInput.value="",e.editGroup('{"action":"create","name":"'+n+'"}'),e.editGroup('{"action":"addmultgroups","names":['+o.toString()+'],"buddys":"'+e.currUid+'"}'),e.syncGp(n,"append"),e.gpDomElement.style.height=parseInt(i)+24+"px"}})},this.getGpNames=function(e){var t=[];return Sizzle("li.selected",e.gpDomElement).forEach(function(e,n){t.push('"'+Sizzle("a",e)[0].innerHTML+'"')}),t},this.appendGpName=function(e,t){var n=document.createElement("li");n.className="selected",n.innerHTML='<a href="#nogo">'+t+"</a>",e.gpDomElement.appendChild(n)},this.checkGpName=function(e,t){return t.length<1?(new XN.DO.showMsg("分组名不能为空."),!1):t.length>10?(new XN.DO.showMsg("分组名不能超过10个字."),!1):"未分组好友"!=t&&/^[0-9a-z\u4e00-\u9fa5]*$/i.test(t)?e.checkDuplicateGpName(t)?(new XN.DO.showMsg("分组名已存在."),!1):"新建分组"==t?(new XN.DO.showMsg("请输入组的名称"),!1):!0:(new XN.DO.showMsg("分组名不合法."),!1)},this.checkDuplicateGpName=function(e,t){var n=!1;return Sizzle("li",e.gpDomElement).forEach(function(e,i){Sizzle("a",e)[0].innerHTML==t&&(n=!0)}),n}})}),XN.dom.ready(function(){setTimeout(function(){object.use("xn/profile/groupedit",function(e){new e.Groupedit})},0)}),object.define("xn/profile/specialfriend","dom, events, jxn",function(require,e){var t=require("dom"),n=(require("events"),require("jxn"));e.SF=new Class(function(){this.initialize=function(e){e.bindEvent()},this.bindEvent=function(e){var i=t.getElement("#specialfriend-box");null!=i&&(i.delegate(".hotfriend-box","mouseover",function(e){var i=t.wrap(e.target);n(i).parent("li").find(".fr-name").hide(),n(i).parent("li").find(".fr-content").show()}),i.delegate(".hotfriend-box","mouseout",function(e){var i=t.wrap(e.target);n(i).parent("li").find(".fr-name").show(),n(i).parent("li").find(".fr-content").hide()}))}})}),XN.dom.ready(function(){object.use("xn/profile/specialfriend",function(e){new e.SF})});